<!DOCTYPE html>
<html lang="ru" data-theme="{{ session.get('theme', 'light') }}">
<head>
    <meta charset="UTF-8">
    <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div style="position: relative;">
    <button id="toggle-theme" style="position: absolute; top: 15px; right: 15px;">üåô</button>
    
    <div class="container">
        <p>
            –ü—Ä–∏–≤–µ—Ç, {{ session['username'] }} |
            <a href="{{ url_for('logout') }}">–í—ã–π—Ç–∏</a>
        </p>

        <h2>üõ†Ô∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>

        <form method="POST" action="{{ url_for('admin_delete_all') }}" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã?');" style="display:inline;">
            <button type="submit">–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã</button>
        </form>

        <form method="GET" action="{{ url_for('admin_export') }}" style="display:inline;">
            <button type="submit">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –≤ CSV</button>
        </form>

        <table>
            <thead>
                <tr>
                    <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                    <th>–ù–∞—á–∞–ª–æ</th>
                    <th>–ö–æ–Ω–µ—Ü</th>
                    <th>–ü—Ä–æ—Ñ–∏–ª—å</th>
                    <th>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ</th>
                    <th>–í—Ä–µ–º—è</th>
                    <th>–î–∞—Ç–∞</th>
                    <th>–£–¥–∞–ª–∏—Ç—å</th>
                </tr>
            </thead>
            <tbody>
                {% for route in routes %}
                <tr>
                    <td>{{ route.user.username }}</td>
                    <td>{{ route.start_point }}</td>
                    <td>{{ route.end_point }}</td>
                    <td>{{ route.profile }}</td>
                    <td>{{ (route.distance / 1000)|round(2) }} –∫–º</td>
                    <td>{{ (route.duration / 60)|round }} –º–∏–Ω</td>
                    <td>{{ route.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('admin_delete_route', route_id=route.id) }}" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å?');">
                            <button type="submit">–£–¥–∞–ª–∏—Ç—å</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
    <script src="{{ url_for('static', filename='theme.js') }}"></script>
</body>
</html>
