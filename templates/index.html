<!DOCTYPE html>
<html lang="ru" data-theme="{{ session.get('theme', 'light') }}">
<head>
    <meta charset="UTF-8">
    <title>–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <button id="toggle-theme" style="position: absolute; top: 15px; right: 15px;">üåô</button>

    <h1>–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ</h1>

    <div id="help-banner">
        üó∫Ô∏è –ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –∫–∞—Ä—Ç–µ –¥–≤–∞–∂–¥—ã, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—É—é –∏ –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞.<br>
        üíæ –ü–æ—Å–ª–µ–¥–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
    </div>
    
    <div class="controls">
        <select id="route-type">
            <option value="driving">–ê–≤—Ç–æ–º–æ–±–∏–ª—å</option>
            <option value="walking">–ü–µ—à–∫–æ–º</option>
            <option value="cycling">–í–µ–ª–æ—Å–∏–ø–µ–¥</option>
        </select>

        <button id="build-route" disabled>–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç</button>
        <button id="reset-map">–û—á–∏—Å—Ç–∏—Ç—å –∫–∞—Ä—Ç—É</button>
    </div>

    {% if session.get('username') %}
    <p>
        –ü—Ä–∏–≤–µ—Ç, {{ session['username'] }} |
        <a href="{{ url_for('logout') }}">–í—ã–π—Ç–∏</a> |
        <a href="{{ url_for('history') }}">–ú–æ–∏ –º–∞—Ä—à—Ä—É—Ç—ã</a>
        {% if session.get('is_admin') %}
            | <a href="{{ url_for('admin_panel') }}">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</a>
        {% endif %}
    </p>
    {% else %}
    <p>
        <a href="{{ url_for('login') }}">–í–æ–π—Ç–∏</a> | 
        <a href="{{ url_for('register') }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
    </p>
    {% endif %}

    <div class="container" style="margin-bottom: 20px;">
        <h3>üìå –í–∞—à–∏ –º–µ—Ç–∫–∏</h3>
        <ul id="marker-list" style="list-style: none; padding: 0;"></ul>
    </div>
    
    <div id="map"></div>
    <div id="route-info"></div>

    <!-- ü™ü –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç–∫–∏ -->
    <div id="markerModal" class="modal hidden">
      <div class="modal-content">
        <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–∫—É</h3>
        <input type="text" id="markerEditText" placeholder="–ù–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å">
        <div class="modal-buttons">
          <button id="saveMarkerBtn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button id="deleteMarkerBtn">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
          <button id="cancelMarkerBtn">‚ùå –û—Ç–º–µ–Ω–∞</button>
        </div>
      </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script src="{{ url_for('static', filename='theme.js') }}"></script>
</body>
</html>
